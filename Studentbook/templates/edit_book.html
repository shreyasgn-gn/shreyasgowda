<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Edit Book | Student Book Market</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 flex justify-center items-center min-h-screen">

<div class="bg-white p-8 rounded shadow-md w-96">
    <h2 class="text-2xl font-bold text-center mb-6">Edit Book</h2>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="bg-green-100 text-green-700 p-2 mb-4 text-center rounded">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <form method="post" enctype="multipart/form-data">
        <!-- Book Title -->
        <input name="title" type="text" placeholder="Book Title" value="{{ book.title }}" 
               class="w-full border p-2 rounded mb-4" required>

        <!-- Author -->
        <input name="author" type="text" placeholder="Author" value="{{ book.author }}" 
               class="w-full border p-2 rounded mb-4" required>

        <!-- Price -->
        <input name="price" type="number" placeholder="Price" value="{{ book.price }}" 
               class="w-full border p-2 rounded mb-4" required>

        <!-- Book Condition -->
        <select name="condition_book" class="w-full border p-2 rounded mb-4" required>
            <option value="">Select Condition</option>
            <option value="New" {% if book.condition_book=='New' %}selected{% endif %}>New</option>
            <option value="Like New" {% if book.condition_book=='Like New' %}selected{% endif %}>Like New</option>
            <option value="Very Good" {% if book.condition_book=='Very Good' %}selected{% endif %}>Very Good</option>
            <option value="Good" {% if book.condition_book=='Good' %}selected{% endif %}>Good</option>
            <option value="Acceptable" {% if book.condition_book=='Acceptable' %}selected{% endif %}>Acceptable</option>
        </select>

        <!-- Contact Number -->
        <input name="contact_number" type="tel" placeholder="Contact Number" 
               value="{{ book.contact_number }}"
               pattern="[0-9]{10}" 
               title="Enter 10 digit mobile number"
               class="w-full border p-2 rounded mb-4" required>

        <!-- Image Upload -->
        <label class="block mb-2 font-semibold">Book Image (optional)</label>
        <input type="file" name="image" class="w-full mb-4">

        {% if book.image %}
        <p class="text-sm mb-2">Current Image:</p>
        <img src="{{ url_for('static', filename='uploads/' ~ book.image) }}" 
             alt="{{ book.title }}" class="w-full h-40 object-cover mb-4 rounded">
        {% endif %}

        <button class="w-full bg-yellow-400 text-white py-2 rounded hover:bg-yellow-500">Update Book</button>
    </form>

    <p class="text-center mt-4">
        <a href="/dashboard" class="text-blue-600 font-semibold">Back to Dashboard</a>
    </p>
</div>

</body>
</html>
